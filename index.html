<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>å‡ºæ¬ ã‚·ã‚¹ãƒ†ãƒ </title>
<style>
body{font-family:sans-serif; padding:20px; background:#f3f4f6;}
h1{color:#1f2937;}
button{padding:10px 20px; margin:10px; border:none; background:#2563eb; color:#fff; border-radius:6px; cursor:pointer;}
button:hover{background:#1e40af;}
section{display:none;}
table{width:100%; border-collapse:collapse; background:#fff; margin-top:20px;}
th,td{border:1px solid #ddd; padding:8px; text-align:left;}
th{background:#e5e7eb;}
</style>
</head>
<body>

<!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
<section id="home" style="display:block;">
  <h1>å­¦æ ¡ å‡ºæ¬ ã‚·ã‚¹ãƒ†ãƒ </h1>
  <button onclick="showStudent()">å‡ºå¸­ç¢ºèªï¼ˆç”Ÿå¾’ç”¨ï¼‰</button>
  <button onclick="teacherLogin()">å…ˆç”Ÿãƒ­ã‚°ã‚¤ãƒ³</button>
</section>

<!-- ç”Ÿå¾’ç”»é¢ -->
<section id="student">
  <h1>å‡ºæ¬ ç¢ºèªï¼ˆç”Ÿå¾’ç”¨ï¼‰</h1>
  <label>åå‰: <input type="text" id="studentName"></label><br>
  <button onclick="markAttendance('å‡ºå¸­')">å‡ºå¸­</button>
  <button onclick="markAttendance('æ¬ å¸­')">æ¬ å¸­</button>
  <p id="result"></p>
  <button onclick="goHome()">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
</section>

<!-- å…ˆç”Ÿç”»é¢ -->
<section id="teacher">
  <h1>å‡ºæ¬ ä¸€è¦§ï¼ˆå…ˆç”Ÿç”¨ï¼‰</h1>
  <table>
    <thead>
      <tr><th>æ—¥ä»˜</th><th>åå‰</th><th>å‡ºæ¬ </th></tr>
    </thead>
    <tbody id="attendanceList"></tbody>
  </table>
  <button onclick="goHome()">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
</section>

<script>
// ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
function showSection(id){
  document.querySelectorAll("section").forEach(sec=>sec.style.display="none");
  document.getElementById(id).style.display="block";
}
function showStudent(){ showSection("student"); }
function showTeacher(){ 
  loadAttendance();
  showSection("teacher"); 
}
function goHome(){ showSection("home"); }

// ç”Ÿå¾’å‡ºæ¬ è¨˜éŒ²
function markAttendance(status){
  const name = document.getElementById("studentName").value.trim();
  if(!name){
    alert("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
    return;
  }
  const today = new Date().toLocaleDateString();
  let records = JSON.parse(localStorage.getItem("attendance")) || [];
  records.push({name, status, date: today});
  localStorage.setItem("attendance", JSON.stringify(records));
  document.getElementById("result").textContent = `âœ… ${name} ã•ã‚“ã‚’ã€Œ${status}ã€ã§è¨˜éŒ²ã—ã¾ã—ãŸ`;
}

// å…ˆç”Ÿãƒ­ã‚°ã‚¤ãƒ³
function teacherLogin(){
  const pass = prompt("å…ˆç”Ÿç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:");
  if(pass === "0018"){
    showTeacher();
  }else{
    alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
}

// å‡ºæ¬ èª­ã¿è¾¼ã¿
function loadAttendance(){
  const data = JSON.parse(localStorage.getItem("attendance")) || [];
  const tbody = document.getElementById("attendanceList");
  tbody.innerHTML = "";
  if(data.length===0){
    tbody.innerHTML = "<tr><td colspan='3'>ã¾ã å‡ºæ¬ ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>";
    return;
  }
  data.forEach(record=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${record.date}</td><td>${record.name}</td><td>${record.status}</td>`;
    tbody.appendChild(tr);
  });
}
</script>

</body>
</html>
