<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>出欠システム</title>
<style>
body{font-family:sans-serif; padding:20px; background:#f3f4f6;}
h1{color:#1f2937;}
button{padding:10px 20px; margin:10px; border:none; background:#2563eb; color:#fff; border-radius:6px; cursor:pointer;}
button:hover{background:#1e40af;}
section{display:none;}
table{width:100%; border-collapse:collapse; background:#fff; margin-top:20px;}
th,td{border:1px solid #ddd; padding:8px; text-align:left;}
th{background:#e5e7eb;}
</style>
</head>
<body>

<!-- ホーム画面 -->
<section id="home" style="display:block;">
  <h1>学校 出欠システム</h1>
  <button onclick="showStudent()">出席確認（生徒用）</button>
  <button onclick="teacherLogin()">先生ログイン</button>
</section>

<!-- 生徒画面 -->
<section id="student">
  <h1>出欠確認（生徒用）</h1>
  <label>名前: <input type="text" id="studentName"></label><br>
  <button onclick="markAttendance('出席')">出席</button>
  <button onclick="markAttendance('欠席')">欠席</button>
  <p id="result"></p>
  <button onclick="goHome()">🏠 ホームに戻る</button>
</section>

<!-- 先生画面 -->
<section id="teacher">
  <h1>出欠一覧（先生用）</h1>
  <table>
    <thead>
      <tr><th>日付</th><th>名前</th><th>出欠</th></tr>
    </thead>
    <tbody id="attendanceList"></tbody>
  </table>
  <button onclick="goHome()">🏠 ホームに戻る</button>
</section>

<script>
// 画面切り替え
function showSection(id){
  document.querySelectorAll("section").forEach(sec=>sec.style.display="none");
  document.getElementById(id).style.display="block";
}
function showStudent(){ showSection("student"); }
function showTeacher(){ 
  loadAttendance();
  showSection("teacher"); 
}
function goHome(){ showSection("home"); }

// 生徒出欠記録
function markAttendance(status){
  const name = document.getElementById("studentName").value.trim();
  if(!name){
    alert("名前を入力してください");
    return;
  }
  const today = new Date().toLocaleDateString();
  let records = JSON.parse(localStorage.getItem("attendance")) || [];
  records.push({name, status, date: today});
  localStorage.setItem("attendance", JSON.stringify(records));
  document.getElementById("result").textContent = `✅ ${name} さんを「${status}」で記録しました`;
}

// 先生ログイン
function teacherLogin(){
  const pass = prompt("先生用パスワードを入力してください:");
  if(pass === "0018"){
    showTeacher();
  }else{
    alert("パスワードが違います");
  }
}

// 出欠読み込み
function loadAttendance(){
  const data = JSON.parse(localStorage.getItem("attendance")) || [];
  const tbody = document.getElementById("attendanceList");
  tbody.innerHTML = "";
  if(data.length===0){
    tbody.innerHTML = "<tr><td colspan='3'>まだ出欠データがありません</td></tr>";
    return;
  }
  data.forEach(record=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${record.date}</td><td>${record.name}</td><td>${record.status}</td>`;
    tbody.appendChild(tr);
  });
}
</script>

</body>
</html>
